<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/vite.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dialtone Dashboard</title>
  
  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
  <!-- Xterm CSS -->
  <link rel="stylesheet" href="/node_modules/@xterm/xterm/css/xterm.css" />
</head>

<body>
  <!-- Helper overlay for notifications just in case -->
  <div id="notification-overlay"></div>

  <!-- Main Grid Container -->
  <div class="grid-container">
    
    <!-- LEFT COLUMN: Terminal & Commands -->
    <section class="panel-left">
      <header class="panel-header">
        <h2>CMD // LOGS</h2>
        <div class="status-indicator" id="conn-status">OFFLINE</div>
      </header>
      
      <div id="terminal-container"></div>
      
      <div class="command-palette">
        <h3>Quick Commands</h3>
        <div class="btn-grid">
           <button id="btn-arm" class="btn btn-danger">ARM</button>
           <button id="btn-disarm" class="btn btn-warning">DISARM</button>
           <button id="btn-logs" class="btn">FETCH LOGS</button>
           <button id="btn-system" class="btn">SYSTEM STATUS</button>
        </div>
        <div class="input-group">
            <input type="text" id="cmd-input" placeholder=">> Send Manual Command..." />
        </div>
      </div>
    </section>

    <!-- CENTER COLUMN: 3D Visualization -->
    <section class="panel-center" id="three-container">
      <div id="hud-overlay">
        <div class="hud-top">
            <div class="hud-stat">ALT: <span id="hud-alt">0.0</span>m</div>
            <div class="hud-stat">SPD: <span id="hud-spd">0.0</span>m/s</div>
        </div>
        <div class="hud-center">
            <div class="hud-mode" id="hud-mode">STABILIZE</div>
        </div>
      </div>
      <!-- Canvas injected by Three.js -->
    </section>

    <!-- RIGHT COLUMN: Camera & Telemetry -->
    <section class="panel-right">
      <header class="panel-header">
        <h2>VISION // DATA</h2>
      </header>

      <div class="camera-feed-container">
        <img id="camera-feed" src="/stream" alt="No Feed" onerror="this.parentElement.classList.add('no-signal')" />
        <div class="cam-overlay">CAM 1 - YUYV</div>
      </div>

      <div class="telemetry-box">
        <h3>Telemetry Stream</h3>
        <table class="telemetry-table">
            <tr>
                <th>HEARTBEAT</th>
                <td id="val-heartbeat" class="mono">--</td>
            </tr>
            <tr>
                <th>BATTERY</th>
                <td id="val-batt" class="mono">-- V</td>
            </tr>
            <tr>
                <th>GPS SATS</th>
                <td id="val-sats" class="mono">--</td>
            </tr>
            <tr>
                <th>LATITUDE</th>
                <td id="val-lat" class="mono">--</td>
            </tr>
            <tr>
                <th>LONGITUDE</th>
                <td id="val-lon" class="mono">--</td>
            </tr>
            <tr>
                <th>ROLL/PITCH</th>
                <td id="val-rp" class="mono">-- / --</td>
            </tr>
            <tr>
                <th>YAW (HDG)</th>
                <td id="val-yaw" class="mono">--</td>
            </tr>
             <tr>
                <th>NATS MSGS</th>
                <td id="val-nats" class="mono">0</td>
            </tr>
        </table>
      </div>

       <div class="system-logs-mini">
        <h3>Recent Alerts</h3>
        <ul id="alert-feed">
            <!-- Dynamic alerts -->
        </ul>
      </div>

    </section>

  </div>

  <script type="module" src="/src/main.ts"></script>
</body>

</html>