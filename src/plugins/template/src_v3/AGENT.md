# AGENT_3 Handoff (src_v3 UI)

## Context
This handoff is for the next LLM working on:
- `src/plugins/template/src_v3/ui/`

Goal for next agent:
- Improve UI styling to align with patterns from `src/libs/ui/`
- Keep fast section switching behavior (no smooth animated scrolling)
- Do not add fade-in text behavior

## What Was Done In This Session
1. Implemented full `src_v3` section coverage and tests:
- `hero`, `docs`, `table`, `three`, `xterm`, `video`
- Test steps `01` through `18` pass in `src/plugins/template/src_v3/test/main.go`

2. Migrated command implementations into `cmd` scope:
- Moved v3 command ops into `src/plugins/template/src_v3/cmd/ops/`
- Updated template CLI imports to use `src_v3/cmd/ops`

3. Removed `dialtest` dependency from `src/libs/test_v2/test.go`:
- `test_v2` now manages browser sessions directly via `src/plugins/chrome/app` + `chromedp`

4. Added `test_v2` report generation and wiring:
- `src/plugins/template/src_v3/test/TEST.md` is generated by `test_v2`
- Includes per-step status and section screenshots

5. Changed screenshot output location:
- Screenshots now save to `src/plugins/template/src_v3/screenshots/test_step_N.png`

6. Added dev-server abstraction to `test_v2`:
- New file: `src/libs/test_v2/dev_server.go`
- `template dev src_v3` now uses `test_v2` dev session abstraction
- Dev browser uses role `dev` (not smoke/test)
- Logs stream to `src/plugins/template/src_v3/dev.log`

## Critical UI Direction For Next Agent
Use style direction from:
- `src/libs/ui/style.css`

Apply visual language and structure from `ui` library, but keep these explicit constraints for `src_v3`:
1. No smooth animated scrolling between sections
2. No fade-in text effects
3. Section switches must remain immediate/deterministic for tests
4. Keep ARIA labels stable (tests depend on them)

## Files To Review First
- `src/plugins/template/src_v3/ui/src/main.ts`
- `src/plugins/template/src_v3/ui/src/style.css`
- `src/plugins/template/src_v3/ui/index.html`
- `src/libs/ui/style.css`
- `src/libs/ui/SectionManager.ts`
- `src/libs/ui/Menu.ts`

## Behavior To Preserve
- Existing section IDs and ARIA labels used by tests
- Existing lifecycle logs emitted by section navigation
- Hash/section navigation behavior used by `test_v2.NavigateToSection`

## Suggested Execution Plan
1. Diff `src/libs/ui/style.css` against `src_v3/ui/src/style.css` and align base variables/layout primitives.
2. Update `src_v3` section markup/classes only where needed to adopt shared style conventions.
3. Avoid adding any transitions/animations affecting navigation or text reveal.
4. Run:
- `./dialtone.sh template test src_v3`
5. Confirm all 18 steps still pass and screenshots still generate under `src_v3/screenshots/`.

## Known Gotchas
- `src/plugins/template/src_v3/cmd/main.go` serves static UI from `ui/dist`; keep path behavior intact.
- Cleanup noise from port cleanup is expected in logs; do not treat it as failure if steps pass.
- Do not move ARIA labels without updating tests.

## Current Validation State
- `./dialtone.sh template test src_v3` passes end-to-end after current changes.
- `./dialtone.sh template dev src_v3` starts Vite, opens dev Chrome session, and writes `dev.log`.
